<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pro Calculator</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Segoe UI',sans-serif;
}

body{
    min-height:100vh;
    background:#0f0f0f;
    display:flex;
    justify-content:center;
    align-items:flex-start; /* Important for top margin */
}

/* Main Container */
.container{
    width:100%;
    max-width:420px;
    min-height:calc(100vh - 40px); /* 20px top & bottom */
    margin:20px 0; /* Top & Bottom 20px */
    background:#1a1a1a;
    border-radius:20px;
    padding:20px;
    display:flex;
    flex-direction:column;
    box-shadow:0 0 50px rgba(255,140,0,0.3);
}

/* History */
.history{
    color:#aaa;
    font-size:14px;
    text-align:right;
    margin-bottom:5px;
    min-height:20px;
}

/* Display */
.display{
    background:#000;
    color:#ff8c00;
    font-size:32px;
    padding:20px;
    text-align:right;
    border-radius:15px;
    min-height:80px;
    word-wrap:break-word;
    overflow-x:auto;
}

/* Buttons Grid */
.buttons{
    flex:1;
    margin-top:15px;
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:12px;
}

/* Buttons */
button{
    font-size:18px;
    border:none;
    border-radius:15px;
    cursor:pointer;
    background:#222;
    color:#fff;
    transition:0.2s;
}

button:hover{
    background:#ff8c00;
    color:#000;
    transform:scale(1.05);
}

button:active{
    transform:scale(0.95);
}

/* Special Buttons */
.operator{
    background:#ff8c00;
    color:#000;
    font-weight:bold;
}

.equal{
    background:#ff8c00;
    color:#000;
    font-weight:bold;
}

.clear{
    background:#ff3b3b;
    color:#fff;
}

@media(max-width:500px){
    .container{
        border-radius:20px;
    }
}
</style>
</head>

<body>

<div class="container">

    <div class="history" id="history"></div>
    <div class="display" id="display">0</div>

    <div class="buttons">
        <button class="clear" onclick="clearAll()">C</button>
        <button onclick="backspace()">⌫</button>
        <button onclick="append('%')">%</button>
        <button class="operator" onclick="append('/')">÷</button>

        <button onclick="append('7')">7</button>
        <button onclick="append('8')">8</button>
        <button onclick="append('9')">9</button>
        <button class="operator" onclick="append('*')">×</button>

        <button onclick="append('4')">4</button>
        <button onclick="append('5')">5</button>
        <button onclick="append('6')">6</button>
        <button class="operator" onclick="append('-')">−</button>

        <button onclick="append('1')">1</button>
        <button onclick="append('2')">2</button>
        <button onclick="append('3')">3</button>
        <button class="operator" onclick="append('+')">+</button>

        <button onclick="toggleSign()">±</button>
        <button onclick="append('0')">0</button>
        <button onclick="square()">x²</button>
        <button class="equal" onclick="calculate()">=</button>

        <button onclick="squareRoot()">√</button>
    </div>
</div>

<script>
let display = document.getElementById("display");
let history = document.getElementById("history");

function append(value){
    if(display.innerText === "0") display.innerText = "";
    display.innerText += value;
}

function clearAll(){
    display.innerText = "0";
    history.innerText = "";
}

function backspace(){
    display.innerText = display.innerText.slice(0,-1) || "0";
}

function toggleSign(){
    display.innerText = display.innerText.startsWith("-") ?
        display.innerText.slice(1) :
        "-" + display.innerText;
}

function square(){
    let val = parseFloat(display.innerText);
    history.innerText = val + "²";
    display.innerText = val * val;
}

function squareRoot(){
    let val = parseFloat(display.innerText);
    history.innerText = "√" + val;
    display.innerText = Math.sqrt(val);
}

function calculate(){
    try{
        history.innerText = display.innerText;
        display.innerText = Function('"use strict";return (' + display.innerText + ')')();
    }catch{
        display.innerText = "Error";
    }
}

/* Keyboard Support */
document.addEventListener("keydown", function(e){
    if(!isNaN(e.key) || ['+','-','*','/','.','%'].includes(e.key)){
        append(e.key);
    }
    if(e.key === "Enter") calculate();
    if(e.key === "Backspace") backspace();
    if(e.key === "Escape") clearAll();
});
</script>

</body>
</html>
